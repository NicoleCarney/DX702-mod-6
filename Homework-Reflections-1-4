In all cases, written answers (apart from code) should not be longer than about three paragraphs.  Graders may not read all of your
submission if it is longer than that.

Homework reflection 1

1. In Coding Quiz 1, you are asked to find the distance of the farthest match in a set.  Is this farthest match distance too far to be a meaningful match?  How can you decide this?

**The farthest match we saw had a distance of about 0.21. On its own, that number doesn’t mean much unless we compare it to the scale of the Z values. If Z values mostly run from 0 to 1, then 0.21 is a pretty big jump. I think it is important to have context on what is being analyzed to better understand if this would be a meaninful match. There needs to be domain knowledge of the data. If Z represents something like age (in years), then a difference of 0.21 years is tiny, but if Z represents something like probability scores from 0 to 1, then 0.21 is pretty big.**

2. In Coding Quiz 1, there are two approaches to matching: 
(A) Picking the best match X = 0 corresponding to each X = 1 using Z values.
(B) Using radius_neighbors to pick all matches X = 0 within a distance of 0.2 of each X = 1.

Invent your own type of matching similar to 1 and 2 (or look one up on the internet), which has a different way to pick the matches in X = 0.  Clearly explain the approach you invented or found.

**Instead of just picking the single closest match (Approach A) or all matches within 0.2 (Approach B), I could pick the two closest matches for each treated unit and then average their Y values and that way treated unit is compared against a “small group” of controls rather than depending on just one or however many happen to fall inside 0.2.**

Homework reflection 2

1. Invent an example situation that would use fixed effects.

**To estimate whether a parent-aide program (a program often referred to parents in social work)reduces time to a stable placement for children, I’d use a two-way fixed-effects model: family fixed effects to compare each family to itself over time (absorbing all time-invariant differences like baseline risk, neighborhood, support) and time fixed effects (by month) to net out system-wide shocks (policy changes, court delays, holidays). The treatment is “parent-aide active this month,” and the coefficient reads as the within-family effect, aligned with this week’s focus on controlling for unobserved, time-invariant confounders.**

2. Write a Python program that performs a bootstrap simulation to find the variance in the mean of the Pareto distribution when different samples are taken.  Explain what you had to do for this.  As you make the full sample size bigger (for the same distribution), what happens to the variance of the mean of the samples?  Does it stay about the same, get smaller, or get bigger?

**I draw a sample from a Pareto distribution, then bootstrap by resampling that data with replacement many times, computing the sample mean each time and taking the variance across those bootstrap means. Repeating this for increasing sample sizes shows that the variance of the sample mean gets smaller as n grows (approximately like 1/n for a well-behaved Pareto with finite variance).**

Homework reflection 3

1. In the event study in Coding Quiz 3, how would we go about testing for a change in the second derivative as well?

**In the event study we only tested for jumps and slope changes. If I wanted to test for a second derivative change, I’d basically add a “curvature” term something like a squared time interaction to see if the bend of the line changes after the event.**

2. Create your own scenario that illustrates differences-in-differences. Describe the story behind the data and show whether there is a nonzero treatment effect.

**In a simple scenario say two schools start out with the same average test scores. Then School A introduces free lunch, School B does not. Afterward, School A’s scores improve more than School B’s. That’s like what we did with homework_3.2.a and 3.2.b cause the treatment group’s “after” outcome went up compared to the control, so the difference-in-differences shows a real treatment effect.**

Homework reflection 4

1. The Coding Quiz gives two options for instrumental variables.  For the second item (dividing the range of W into multiple ranges), explain how you did it, show your code, and discuss any issues you encountered.

**For the second item i split W into bins and compared the average distances in Y and X between Z = 1 and = 0 inside each of the bins and then from there took the ratios and averaged them but some bins didn't have both values of Z so they were skipped**

bins = np.linspace(df_iv["W"].min(), df_iv["W"].max(), 10)
df_iv["W_bin"] = pd.cut(df_iv["W"], bins)

effects = []
for _, subset in df_iv.groupby("W_bin"):
    if subset["Z"].nunique() == 2:
        y_diff = subset[subset["Z"]==1]["Y"].mean() - subset[subset["Z"]==0]["Y"].mean()
        x_diff = subset[subset["Z"]==1]["X"].mean() - subset[subset["Z"]==0]["X"].mean()
        if x_diff != 0:
            effects.append(y_diff/x_diff)

effect_method2 = np.mean(effects)


2. Plot the college outcome (Y) vs. the test score (X) in a small range of test scores around 80. On the plot, compare it with the Y probability predicted by logistic regression. The ground truth Y value is 0 or 1; don't just plot 0 or 1 - that will make it unreadable.  Find some way to make it look better than that.

**Because the cutoff was 80 I fit a logistical regression of Y and X in the range of 70 - 90 so it was still wide enough to see the trend w/o the rest of the data crowding the plot and instead of plotting the raw 0/1 outcomes I showed them as scattered points and then just overlaid the predicted probability curve on top**

log_reg = LogisticRegression()
mask = (df_a["X"]>=70) & (df_a["X"]<=90)
x = df_a.loc[mask,"X"].values.reshape(-1,1)
y = df_a.loc[mask,"Y"].values
log_reg.fit(x,y)

x_test = np.linspace(70,90,200).reshape(-1,1)
y_pred = log_reg.predict_proba(x_test)[:,1]

plt.scatter(x,y,alpha=0.3)
plt.plot(x_test,y_pred,color="red")
plt.axvline(80,color="blue",linestyle="--")